import{a as G,b as Q,c as $,d as z,e as B,f as J,g as K,h as U,k as W}from"./chunk-SW2FPS52.js";import{C as p,D as l,I as A,K as d,M as s,N as m,O as f,P as S,Q as x,R as T,V as j,W as a,X as F,Z as M,a as N,ba as k,c as D,ca as q,ea as P,g as E,ga as H,l as O,oa as R,p as g,q as _,s as h,t as v,v as b,w as V,z as w}from"./chunk-6TKZ26D2.js";var u=(()=>{let e=class e{constructor(){this.items=[],this.itemsChanged=new D}getItems(){return this.items.slice()}getItem(t){return this.items[t]}addItem(t){this.items.push(t),this.itemsChanged.next(this.items.slice())}setItems(t){this.items=t,this.itemsChanged.next(this.items.slice())}deleteItem(t){this.items.splice(t,1),this.itemsChanged.next(this.items.slice())}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=b({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var C=(()=>{let e=class e{constructor(t,i){this.http=t,this.shoppingListService=i}storeItem(){let t=this.shoppingListService.getItems();this.http.put("https://shopping-app-001-default-rtdb.europe-west1.firebasedatabase.app/items.json",t).subscribe(i=>{console.log(i)})}fetchItems(){return this.http.get("https://shopping-app-001-default-rtdb.europe-west1.firebasedatabase.app/items.json").pipe(E(t=>t?t.filter(o=>o).map(o=>N({},o)):[]),O(t=>{this.shoppingListService.setItems(t)}))}deleteItem(t){let i=this.shoppingListService.getItems(),o=i.find(r=>r&&r.name===t.name);if(o){let r=i.indexOf(o);this.http.delete("https://shopping-app-001-default-rtdb.europe-west1.firebasedatabase.app/items/"+i.indexOf(o)+".json").subscribe(()=>this.shoppingListService.deleteItem(r))}}};e.\u0275fac=function(i){return new(i||e)(w(H),w(u))},e.\u0275prov=b({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var y=class{constructor(e,c,t){this.name=e,this.quantity=c,this.id=t}};var Y=(n,e)=>({"is-valid":n,"is-invalid":e}),Z=(()=>{let e=class e{constructor(t,i){this.shoppingListService=t,this.dataStorageService=i}onSubmit(t){if(!t.valid)return;let i=new y(t.value.name,t.value.amount);this.shoppingListService.addItem(i),this.dataStorageService.storeItem(),t.reset()}};e.\u0275fac=function(i){return new(i||e)(l(u),l(C))},e.\u0275cmp=g({type:e,selectors:[["app-add-item"]],decls:14,vars:9,consts:[[3,"ngSubmit"],["itemForm","ngForm"],[1,"form-group","mb-3"],["for","name",1,"form-label"],["type","text","name","name","ngModel","","required","","aria-describedby","nameHelp",1,"form-control",3,"ngClass"],["id","nameHelp",1,"form-text"],["for","exampleInputPassword1",1,"form-label"],["type","number","name","amount","ngModel","","required","",1,"form-control",3,"ngClass"],["type","submit",1,"btn","btn-primary",3,"disabled"]],template:function(i,o){if(i&1){let r=S();s(0,"form",0,1),x("ngSubmit",function(){h(r);let te=j(1);return v(o.onSubmit(te))}),s(2,"div",2)(3,"label",3),a(4,"Name"),m(),f(5,"input",4),s(6,"div",5),a(7,"Add a new item to Shopping list"),m()(),s(8,"div",2)(9,"label",6),a(10,"Quantity"),m(),f(11,"input",7),m(),s(12,"button",8),a(13,"Add item"),m()()}if(i&2){let r=j(1);p(5),d("ngClass",M(3,Y,r.value.name,!r.value.name)),p(6),d("ngClass",M(6,Y,r.value.amount,!r.value.amount)),p(),d("disabled",!r.valid)}},dependencies:[J,G,K,Q,$,U,B,z,k]});let n=e;return n})();function re(n,e){if(n&1){let c=S();s(0,"li",7)(1,"i",8),x("click",function(){let o=h(c).index,r=T();return v(r.onDeleteItem(o))}),m(),s(2,"span"),a(3),m(),s(4,"span",9),a(5),m()()}if(n&2){let c=e.$implicit;p(3),F(c.name),p(2),F(c.quantity)}}var ee=(()=>{let e=class e{constructor(t,i){this.shoppingListService=t,this.dataStorageService=i,this.items=[]}ngOnInit(){this.dataStorageService.fetchItems().subscribe(),this.subscription=this.shoppingListService.itemsChanged.subscribe(t=>this.items=t)}onDeleteItem(t){let i=this.shoppingListService.getItem(t);this.dataStorageService.deleteItem(i)}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)(l(u),l(C))},e.\u0275cmp=g({type:e,selectors:[["app-shopping-list"]],decls:9,vars:1,consts:[[1,"container"],[1,"row"],[1,"col-xs-12","col-sm-12","col-md-6","col-lg-6","col-xl-6"],[1,"col-xs-12","col-sm-12","col-md-12","col-lg-6","col-xl-6"],[1,"form-label"],[1,"list-group"],["class","list-group-item",4,"ngFor","ngForOf"],[1,"list-group-item"],[1,"bi","bi-trash",2,"cursor","pointer",3,"click"],[1,"badge","bg-secondary","float-end","mt-0"]],template:function(i,o){i&1&&(s(0,"div",0)(1,"div",1)(2,"div",2),f(3,"app-add-item"),m(),s(4,"div",3)(5,"label",4),a(6,"Items added"),m(),s(7,"ul",5),A(8,re,6,2,"li",6),m()()()()),i&2&&(p(8),d("ngForOf",o.items))},dependencies:[q,Z],styles:[".row[_ngcontent-%COMP%]{margin-top:10px!important}.list-group-item[_ngcontent-%COMP%]{padding:1rem 1.5rem;border-radius:.3rem;border:1px solid #dee2e6;margin-top:10px}.badge[_ngcontent-%COMP%]{margin-top:.5rem}.d-grid[_ngcontent-%COMP%]{margin-top:10px}"]});let n=e;return n})();var xe=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=_({type:e}),e.\u0275inj=V({imports:[W,P,R.forChild([{path:"",component:ee}])]});let n=e;return n})();export{xe as ShoppingListModule};
